pkgname=${name}
pkgver=${version}
pkgrel=1
pkgdesc="In computing, uClibc is a small C standard library intended for embedded Linux systems"
arch=('arm')
url="http://www.uclibc.org/"
license=('LGPL')
groups=('base')
depends=()
source=(${_url})
md5sums=(${md5})

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -Np1 -i ../${name}-${version}-configs-2.patch

  cp -v clfs/config.${CLFS_ARCH}.${CLFS_ENDIAN} .config
  if [ "${CLFS_ABI}" == "aapcs" ] || [ "${CLFS_ABI}" == "aapcs-linux" ]
  then sed -i s/CONFIG_ARM_OABI/CONFIG_ARM_EABI/g .config
  fi

  sed -e '/.size/d' -i libc/sysdeps/linux/arm/crtn.S

  make oldconfig
  make
}

#check() {
#  cd ${srcdir}/${pkgname}-${pkgver}

#}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}

  install -d ${pkgdir}/usr/lib

  make PREFIX=${pkgdir} install
}

# vim:set ts=2 sw=2 et:
